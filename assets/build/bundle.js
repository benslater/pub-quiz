var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function r(t){t.forEach(e)}function o(t){return"function"==typeof t}function a(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function s(e,...n){if(null==e)return t;const r=e.subscribe(...n);return r.unsubscribe?()=>r.unsubscribe():r}function u(t,e,n){t.$$.on_destroy.push(s(e,n))}function c(t,e,n,r){return t[1]&&r?function(t,e){for(const n in e)t[n]=e[n];return t}(n.ctx.slice(),t[1](r(e))):n.ctx}function i(t,e){t.appendChild(e)}function l(t,e,n){t.insertBefore(e,n||null)}function d(t){t.parentNode.removeChild(t)}function f(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function m(t){return document.createElement(t)}function p(t){return document.createTextNode(t)}function g(){return p(" ")}function h(){return p("")}function v(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function $(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function b(t,e){e=""+e,t.data!==e&&(t.data=e)}function y(t,e){(null!=e||t.value)&&(t.value=e)}function w(t,e,n){t.classList[n?"add":"remove"](e)}let R;function x(t){R=t}function P(t){(function(){if(!R)throw new Error("Function called outside component initialization");return R})().$$.on_mount.push(t)}const C=[],k=[],N=[],O=[],S=Promise.resolve();let A=!1;function E(t){N.push(t)}let j=!1;const q=new Set;function _(){if(!j){j=!0;do{for(let t=0;t<C.length;t+=1){const e=C[t];x(e),T(e.$$)}for(C.length=0;k.length;)k.pop()();for(let t=0;t<N.length;t+=1){const e=N[t];q.has(e)||(q.add(e),e())}N.length=0}while(C.length);for(;O.length;)O.pop()();A=!1,j=!1,q.clear()}}function T(t){if(null!==t.fragment){t.update(),r(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(E)}}const I=new Set;let L;function U(){L={r:0,c:[],p:L}}function z(){L.r||r(L.c),L=L.p}function D(t,e){t&&t.i&&(I.delete(t),t.i(e))}function W(t,e,n,r){if(t&&t.o){if(I.has(t))return;I.add(t),L.c.push(()=>{I.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}}function M(t){t&&t.c()}function Q(t,n,a){const{fragment:s,on_mount:u,on_destroy:c,after_update:i}=t.$$;s&&s.m(n,a),E(()=>{const n=u.map(e).filter(o);c?c.push(...n):r(n),t.$$.on_mount=[]}),i.forEach(E)}function J(t,e){const n=t.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function B(t,e){-1===t.$$.dirty[0]&&(C.push(t),A||(A=!0,S.then(_)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function F(e,o,a,s,u,c,i=[-1]){const l=R;x(e);const f=o.props||{},m=e.$$={fragment:null,ctx:null,props:c,update:t,not_equal:u,bound:n(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(l?l.$$.context:[]),callbacks:n(),dirty:i};let p=!1;if(m.ctx=a?a(e,f,(t,n,...r)=>{const o=r.length?r[0]:n;return m.ctx&&u(m.ctx[t],m.ctx[t]=o)&&(m.bound[t]&&m.bound[t](o),p&&B(e,t)),n}):[],m.update(),p=!0,r(m.before_update),m.fragment=!!s&&s(m.ctx),o.target){if(o.hydrate){const t=function(t){return Array.from(t.childNodes)}(o.target);m.fragment&&m.fragment.l(t),t.forEach(d)}else m.fragment&&m.fragment.c();o.intro&&D(e.$$.fragment),Q(e,o.target,o.anchor),_()}x(l)}class G{$destroy(){J(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(){}}const H=[];function K(t,e){return{subscribe:V(t,e).subscribe}}function V(e,n=t){let r;const o=[];function s(t){if(a(e,t)&&(e=t,r)){const t=!H.length;for(let t=0;t<o.length;t+=1){const n=o[t];n[1](),H.push(n,e)}if(t){for(let t=0;t<H.length;t+=2)H[t][0](H[t+1]);H.length=0}}}return{set:s,update:function(t){s(t(e))},subscribe:function(a,u=t){const c=[a,u];return o.push(c),1===o.length&&(r=n(s)||t),a(e),()=>{const t=o.indexOf(c);-1!==t&&o.splice(t,1),0===o.length&&(r(),r=null)}}}}function Y(t){return t&&t.default||t}const X=(0,Y(Object.freeze({__proto__:null,derived:function(e,n,a){const u=!Array.isArray(e),c=u?[e]:e,i=n.length<2;return K(a,e=>{let a=!1;const l=[];let d=0,f=t;const m=()=>{if(d)return;f();const r=n(u?l[0]:l,e);i?e(r):f=o(r)?r:t},p=c.map((t,e)=>s(t,t=>{l[e]=t,d&=~(1<<e),a&&m()},()=>{d|=1<<e}));return a=!0,m(),function(){r(p),f()}})},readable:K,writable:V,get:function(t){let e;return s(t,t=>e=t)(),e}})).writable)({});var Z={activeRoute:{subscribe:X.subscribe,set:function(t){X.set(t)},remove:function(){X.set({})}}},tt=Z.activeRoute;var et={UrlParser:(t,e="")=>{const n=new URL(t);function r(){return a(e).reduce((t,e,n)=>(":"===e[0]&&t.push({value:e.slice(1),index:n}),t),[])}function o(){return a(n.pathname)}function a(t){return"/"===t||0===t.trim().length?[t]:("/"===t.slice(-1)&&(t=t.slice(0,-1)),"/"===t[0]&&(t=t.slice(1)),t.split("/"))}return Object.freeze({host:n.host,hostname:n.hostname,namedParams:function(){const t=o();return r().reduce((e,n)=>(e[n.value]=t[n.index],e),{})}(),namedParamsKeys:r().reduce((t,e)=>(t.push(e.value),t),[]),namedParamsValues:function(){const t=o();return r().reduce((e,n)=>(e.push(t[n.index]),e),[])}(),pathNames:o(),port:n.port,pathname:n.pathname,protocol:n.protocol,search:n.search,queryParams:function(){const t={};return n.searchParams.forEach((e,n)=>{t[n]=e}),t}(),queryParamsKeys:function(){const t=[];return n.searchParams.forEach((e,n)=>{t.push(n)}),t}(),queryParamsValues:function(){const t=[];return n.searchParams.forEach(e=>{t.push(e)}),t}()})}};function nt(t,e){return(e=at(e)).includes(":")?e.includes(t):e.startsWith(t)}function rt(t,e,n){let r=!1;if(n)return{exists:e.lang&&e.lang[n]&&e.lang[n].includes(t),language:n};if(r=nt(t,e.name),!r&&e.lang&&"object"==typeof e.lang)for(const[o,a]of Object.entries(e.lang))nt(t,a)&&(r=!0,n=o);return{exists:r,language:n}}function ot(t){return"/"===t||0===t.trim().length?[t]:(t=at(t,"both")).split("/")}function at(t,e="lead"){return t.trim().length<1?"":("trail"!==e&&"both"!==e||"/"===t.slice(-1)&&(t=t.slice(0,-1)),"lead"!==e&&"both"!==e||"/"===t[0]&&(t=t.slice(1)),t)}function st(t,e=null){return e&&t.lang&&t.lang[e]?t.lang[e]:t.name}var ut={anyEmptyNestedRoutes:function t(e){let n=!1;return 0===Object.keys(e).length||(e.childRoute&&0===Object.keys(e.childRoute).length?n=!0:e.childRoute&&(n=t(e.childRoute)),n)},compareRoutes:nt,findLocalisedRoute:rt,getNamedParams:function(t=""){return 0===t.trim().length?[]:ot(t).reduce((t,e)=>(":"===e[0]&&t.push(e.slice(1)),t),[])},getPathNames:ot,nameToPath:function(t=""){let e;return"/"===t||0===t.trim().length?t:(e=(t=at(t,"lead")).split(":")[0],e=at(e,"trail"),e.toLowerCase())},pathWithQueryParams:function(t){let e=[];if(t.queryParams)for(let[n,r]of Object.entries(t.queryParams))e.push(`${n}=${r}`);return e.length>0?`${t.path}?${e.join("&")}`:t.path},pathWithoutQueryParams:function(t){return t.path.split("?")[0]},removeExtraPaths:function(t,e){const n=e.split("/");return n.length>1&&n.forEach((function(e,n){e.length>0&&n>0&&t.shift()})),t},removeSlash:at,routeNameLocalised:st,updateRoutePath:function(t,e,n,r,o=!1){if("/"===t||0===t.trim().length)return{result:t,language:null};let a=t,s=n.name,u=r;if(o&&(u=""),s=at(s),a=at(a),n.childRoute)return{result:t,language:u};{let t=rt(a,n,u);t.exists&&o&&(a=st(n,r));let c=s.split(":")[0];return c=at(c,"trail"),c=c.split("/"),c.shift(),c.forEach(()=>{const s=e[0];if(t=rt(`${a}/${s}`,n,u),!s||!t.exists)return{result:a,language:t.language};a=o?st(n,r):`${a}/${s}`,e.shift()}),{result:a,language:t.language}}}};const{UrlParser:ct}=et,{pathWithQueryParams:it,removeSlash:lt}=ut;var dt={RouterCurrent:function(t){const e=t||!1;let n="";return Object.freeze({active:function(){return n},isActive:function(t,e=!1){"/"!==t[0]&&(t="/"+t);let r=ct("http://fake.com"+t).pathname,o=ct("http://fake.com"+n).pathname;return r=lt(r,"trail"),o=lt(o,"trail"),e?o.includes(r):o===r},setActive:function(t){n=t.path,function(t){if("undefined"!=typeof window){const r=it(t);window.history.pushState({page:r},"",r),e&&(n=r,"undefined"!=typeof ga&&(ga("set","page",n),ga("send","pageview")))}var n}(t)}})}};var ft={RouterGuard:function(t){const e=t;return Object.freeze({valid:function(){return e&&e.guard&&"function"==typeof e.guard},redirect:function(){return!e.guard()},redirectPath:function(){let t="/";return e.redirect&&e.redirect.length>0&&(t=e.redirect),t}})}};const{RouterGuard:mt}=ft;var pt={RouterRedirect:function(t,e){const n=mt(t.onlyIf);return Object.freeze({path:function(){let r=e;return t.redirectTo&&t.redirectTo.length>0&&(r=t.redirectTo),n.valid()&&n.redirect()&&(r=n.redirectPath()),r}})}};const{UrlParser:gt}=et;var ht={RouterRoute:function({routeInfo:t,path:e,routeNamedParams:n,urlParser:r,namedPath:o,language:a}){function s(){const t=gt("https://fake.com"+r.pathname,o).namedParams;return{...n,...t}}return Object.freeze({get:function(){return{name:e,component:t.component,layout:t.layout,queryParams:r.queryParams,namedParams:s(),path:e,language:a}},namedParams:s})}};const{updateRoutePath:vt,getNamedParams:$t,nameToPath:bt,removeExtraPaths:yt,routeNameLocalised:wt}=ut;var Rt={RouterPath:function({basePath:t,basePathName:e,pathNames:n,convert:r,currentLanguage:o}){let a,s,u=o;function c(){return wt(s,u)}function i(){return bt(c())}function l(){return bt(a.result)}return Object.freeze({basePathSameAsLocalised:function(){return l()===i()},updatedPath:function(t){return s=t,a=vt(e,n,s,u,r),u=r?o:a.language,a},basePathNameWithoutNamedParams:l,localisedPathName:c,localisedRouteWithoutNamedParams:i,namedPath:function(){const e=c();return t?`${t}/${e}`:e},pathNames:n,routeLanguage:function(){return u},routePath:function(){let e=`${t}/${l()}`;"//"===e&&(e="/"),u&&(n=yt(n,i()));const r=$t(c());return r&&r.length>0&&r.forEach((function(){n.length>0&&(e+="/"+n.shift())})),e}})}};const{UrlParser:xt}=et,{RouterRedirect:Pt}=pt,{RouterRoute:Ct}=ht,{RouterPath:kt}=Rt,{anyEmptyNestedRoutes:Nt,pathWithoutQueryParams:Ot}=ut;var St={RouterFinder:function({routes:t,currentUrl:e,routerOptions:n,convert:r}){const o=n.defaultLanguage,a=xt(e);let s="",u={};return Object.freeze({findActiveRoute:function(){let e=function t(e,n,r,c,i){let l={},d=r.shift().toLowerCase();const f=kt({basePath:n,basePathName:d,pathNames:r,convert:i,currentLanguage:c});e.forEach((function(e){if(f.updatedPath(e),f.basePathSameAsLocalised()){let n=f.routePath();if(s=Pt(e,s).path(),l.name!==n&&(l=function({route:t,routePath:e,routeLanguage:n,urlParser:r,namedPath:a}){const s=Ct({routeInfo:t,urlParser:r,path:e,routeNamedParams:u,namedPath:a,language:n||o});return u=s.namedParams(),s.get()}({route:e,routePath:n,routeLanguage:f.routeLanguage(),urlParser:a,namedPath:f.namedPath()})),e.nestedRoutes&&e.nestedRoutes.length>0&&f.pathNames.length>0)l.childRoute=t(e.nestedRoutes,n,f.pathNames,f.routeLanguage(),i),l.path=l.childRoute.path,l.language=l.childRoute.language;else if(function(t,e){return t.nestedRoutes&&t.nestedRoutes.length>0&&0===e.length}(e,f.pathNames)){const r=t(e.nestedRoutes,n,["index"],f.routeLanguage(),i);r&&Object.keys(r).length>0&&(l.childRoute=r,l.language=l.childRoute.language)}}})),s&&(l.redirectTo=s);return l}(t,"",a.pathNames,n.lang,r);return e&&Object.keys(e).length&&!Nt(e)?e.path=Ot(e):"undefined"!=typeof window&&(e=function(e){const n=t.find(t=>"404"==t.name),r=e||o||"";return n?{...n,language:r,path:"404"}:{name:"404",component:"",path:"404",redirectTo:"/404.html"}}(n.lang)),e}})}};const{activeRoute:At}=Z,{RouterCurrent:Et}=dt,{RouterFinder:jt}=St,{removeSlash:qt}=ut;let _t,Tt=[],It={};function Lt(t,e,n={}){function r(){let n=!1;return It.langConvertTo&&(It.lang=It.langConvertTo,n=!0),jt({routes:t,currentUrl:e,routerOptions:It,convert:n}).findActiveRoute()}return It={...n},void 0!==e&&""!==e||(e=document.location.href),_t=Et(It.gaPageviews),e=qt(e,"trail"),Tt=t,Object.freeze({setActiveRoute:function(){const t=r();return t.redirectTo?(e=t.redirectTo,"undefined"!=typeof window&&("/404.html"===e?_t.setActive({path:"/404.html"}):Ut(e)),e):(_t.setActive(t),At.set(t),t);var e},findActiveRoute:r})}function Ut(t,e=null){return t=qt(t,"lead"),e&&(It.langConvertTo=e),Lt(Tt,"http://fake.com/"+t,It).setActiveRoute()}"undefined"!=typeof window&&(window.addEventListener("click",t=>{t.target.pathname&&t.target.hostname===window.location.hostname&&"a"===t.target.localName&&(t.preventDefault(),Ut(t.target.pathname+t.target.search))}),window.onpopstate=function(t){Ut(window.location.pathname+window.location.search)});var zt={SpaRouter:Lt,localisedRoute:function(t,e){return t=qt(t,"lead"),It.langConvertTo=e,Lt(Tt,"http://fake.com/"+t,It).findActiveRoute()},navigateTo:Ut,routeIsActive:function(t,e=!1){return _t.isActive(t,e)}},Dt=zt.SpaRouter,Wt=zt.localisedRoute,Mt=zt.navigateTo,Qt=zt.routeIsActive;function Jt(t){let e;const n=new Kt({props:{currentRoute:t[0].childRoute,params:t[1]}});return{c(){M(n.$$.fragment)},m(t,r){Q(n,t,r),e=!0},p(t,e){const r={};1&e&&(r.currentRoute=t[0].childRoute),2&e&&(r.params=t[1]),n.$set(r)},i(t){e||(D(n.$$.fragment,t),e=!0)},o(t){W(n.$$.fragment,t),e=!1},d(t){J(n,t)}}}function Bt(t){let e,n;var r=t[0].component;function o(t){return{props:{currentRoute:{...t[0],component:""},params:t[1]}}}if(r)var a=new r(o(t));return{c(){a&&M(a.$$.fragment),e=h()},m(t,r){a&&Q(a,t,r),l(t,e,r),n=!0},p(t,n){const s={};if(1&n&&(s.currentRoute={...t[0],component:""}),2&n&&(s.params=t[1]),r!==(r=t[0].component)){if(a){U();const t=a;W(t.$$.fragment,1,0,()=>{J(t,1)}),z()}r?(M((a=new r(o(t))).$$.fragment),D(a.$$.fragment,1),Q(a,e.parentNode,e)):a=null}else r&&a.$set(s)},i(t){n||(a&&D(a.$$.fragment,t),n=!0)},o(t){a&&W(a.$$.fragment,t),n=!1},d(t){t&&d(e),a&&J(a,t)}}}function Ft(t){let e,n;var r=t[0].layout;function o(t){return{props:{currentRoute:{...t[0],layout:""},params:t[1]}}}if(r)var a=new r(o(t));return{c(){a&&M(a.$$.fragment),e=h()},m(t,r){a&&Q(a,t,r),l(t,e,r),n=!0},p(t,n){const s={};if(1&n&&(s.currentRoute={...t[0],layout:""}),2&n&&(s.params=t[1]),r!==(r=t[0].layout)){if(a){U();const t=a;W(t.$$.fragment,1,0,()=>{J(t,1)}),z()}r?(M((a=new r(o(t))).$$.fragment),D(a.$$.fragment,1),Q(a,e.parentNode,e)):a=null}else r&&a.$set(s)},i(t){n||(a&&D(a.$$.fragment,t),n=!0)},o(t){a&&W(a.$$.fragment,t),n=!1},d(t){t&&d(e),a&&J(a,t)}}}function Gt(t){let e,n,r,o;const a=[Ft,Bt,Jt],s=[];function u(t,e){return t[0].layout?0:t[0].component?1:t[0].childRoute?2:-1}return~(e=u(t))&&(n=s[e]=a[e](t)),{c(){n&&n.c(),r=h()},m(t,n){~e&&s[e].m(t,n),l(t,r,n),o=!0},p(t,[o]){let c=e;e=u(t),e===c?~e&&s[e].p(t,o):(n&&(U(),W(s[c],1,1,()=>{s[c]=null}),z()),~e?(n=s[e],n||(n=s[e]=a[e](t),n.c()),D(n,1),n.m(r.parentNode,r)):n=null)},i(t){o||(D(n),o=!0)},o(t){W(n),o=!1},d(t){~e&&s[e].d(t),t&&d(r)}}}function Ht(t,e,n){let{currentRoute:r={}}=e,{params:o={}}=e;return t.$set=t=>{"currentRoute"in t&&n(0,r=t.currentRoute),"params"in t&&n(1,o=t.params)},[r,o]}class Kt extends G{constructor(t){super(),F(this,t,Ht,Gt,a,{currentRoute:0,params:1})}}var Vt=Object.freeze({__proto__:null,default:Kt});function Yt(t){let e;const n=new Kt({props:{currentRoute:t[0]}});return{c(){M(n.$$.fragment)},m(t,r){Q(n,t,r),e=!0},p(t,[e]){const r={};1&e&&(r.currentRoute=t[0]),n.$set(r)},i(t){e||(D(n.$$.fragment,t),e=!0)},o(t){W(n.$$.fragment,t),e=!1},d(t){J(n,t)}}}function Xt(t,e,n){let r;u(t,tt,t=>n(0,r=t));let{routes:o=[]}=e,{options:a={}}=e;return P((function(){Dt(o,document.location.href,a).setActiveRoute()})),t.$set=t=>{"routes"in t&&n(1,o=t.routes),"options"in t&&n(2,a=t.options)},[r,o,a]}var Zt=Object.freeze({__proto__:null,default:class extends G{constructor(t){super(),F(this,t,Xt,Yt,a,{routes:1,options:2})}}});function te(t){let e,n,r;const o=t[6].default,a=function(t,e,n,r){if(t){const o=c(t,e,n,r);return t[0](o)}}(o,t,t[5],null);return{c(){e=m("a"),a&&a.c(),$(e,"href",t[0]),$(e,"title",t[1]),$(e,"class",t[2]),w(e,"active",Qt(t[0]))},m(o,s,u){l(o,e,s),a&&a.m(e,null),n=!0,u&&r(),r=v(e,"click",t[3])},p(t,[r]){a&&a.p&&32&r&&a.p(c(o,t,t[5],null),function(t,e,n,r){if(t[2]&&r){const o=t[2](r(n));if(void 0===e.dirty)return o;if("object"==typeof o){const t=[],n=Math.max(e.dirty.length,o.length);for(let r=0;r<n;r+=1)t[r]=e.dirty[r]|o[r];return t}return e.dirty|o}return e.dirty}(o,t[5],r,null)),(!n||1&r)&&$(e,"href",t[0]),(!n||2&r)&&$(e,"title",t[1]),(!n||4&r)&&$(e,"class",t[2]),5&r&&w(e,"active",Qt(t[0]))},i(t){n||(D(a,t),n=!0)},o(t){W(a,t),n=!1},d(t){t&&d(e),a&&a.d(t),r()}}}function ee(t,e,n){let{to:r="/"}=e,{title:o=""}=e,{styles:a=""}=e,{lang:s=null}=e;P((function(){if(s){const t=Wt(r,s);t&&n(0,r=t.path)}}));let{$$slots:u={},$$scope:c}=e;return t.$set=t=>{"to"in t&&n(0,r=t.to),"title"in t&&n(1,o=t.title),"styles"in t&&n(2,a=t.styles),"lang"in t&&n(4,s=t.lang),"$$scope"in t&&n(5,c=t.$$scope)},[r,o,a,function(t){t.preventDefault(),t.stopPropagation(),Mt(r)},s,c,u]}var ne=Object.freeze({__proto__:null,default:class extends G{constructor(t){super(),F(this,t,ee,te,a,{to:0,title:1,styles:2,lang:4})}}}),re=Y(Vt),oe=Y(Zt),ae=Y(ne);const{SpaRouter:se,navigateTo:ue,localisedRoute:ce,routeIsActive:ie}=zt;var le={SpaRouter:se,localisedRoute:ce,navigateTo:ue,routeIsActive:ie,Route:re,Router:oe,Navigate:ae},de=le.navigateTo,fe=le.Router,me=le.Navigate,pe=function(t,e){return t(e={exports:{}},e.exports),e.exports}((function(t,e){var n;n=function(){function t(){for(var t=0,e={};t<arguments.length;t++){var n=arguments[t];for(var r in n)e[r]=n[r]}return e}function e(t){return t.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function n(r){function o(){}function a(e,n,a){if("undefined"!=typeof document){"number"==typeof(a=t({path:"/"},o.defaults,a)).expires&&(a.expires=new Date(1*new Date+864e5*a.expires)),a.expires=a.expires?a.expires.toUTCString():"";try{var s=JSON.stringify(n);/^[\{\[]/.test(s)&&(n=s)}catch(t){}n=r.write?r.write(n,e):encodeURIComponent(String(n)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),e=encodeURIComponent(String(e)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var u="";for(var c in a)a[c]&&(u+="; "+c,!0!==a[c]&&(u+="="+a[c].split(";")[0]));return document.cookie=e+"="+n+u}}function s(t,n){if("undefined"!=typeof document){for(var o={},a=document.cookie?document.cookie.split("; "):[],s=0;s<a.length;s++){var u=a[s].split("="),c=u.slice(1).join("=");n||'"'!==c.charAt(0)||(c=c.slice(1,-1));try{var i=e(u[0]);if(c=(r.read||r)(c,i)||e(c),n)try{c=JSON.parse(c)}catch(t){}if(o[i]=c,t===i)break}catch(t){}}return t?o[t]:o}}return o.set=a,o.get=function(t){return s(t,!1)},o.getJSON=function(t){return s(t,!0)},o.remove=function(e,n){a(e,"",t(n,{expires:-1}))},o.defaults={},o.withConverter=n,o}((function(){}))},t.exports=n()}));const ge="PLAYER",he="HOST",ve=V({}),$e=V(),be=V({id:"",name:""});function ye(t){let e;return{c(){e=m("button"),e.textContent="Start new game",$(e,"class","svelte-1vi3t37")},m(t,n){l(t,e,n)},d(t){t&&d(e)}}}function we(t){let e;return{c(){e=m("button"),e.textContent="Join game",$(e,"class","svelte-1vi3t37")},m(t,n){l(t,e,n)},d(t){t&&d(e)}}}function Re(t){let e,n,r,o,a,s,u,c,f,h,b,y,w,R,x,P,C,k,N,O,S,A,E,j,q,_,T,I;const L=new me({props:{to:"/setup",$$slots:{default:[ye]},$$scope:{ctx:t}}}),U=new me({props:{to:"/join",$$slots:{default:[we]},$$scope:{ctx:t}}});return{c(){e=m("div"),n=m("input"),r=g(),o=m("div"),a=m("label"),s=g(),u=m("div"),c=m("label"),c.textContent="X",f=g(),h=m("h4"),h.textContent="It looks like you have a game in progress!",b=g(),y=m("p"),w=p("Do you want to rejoin the game\n        "),R=m("span"),R.textContent=""+(t[0]&&t[0].game.gameId),x=p("\n        ?"),P=g(),C=m("div"),k=m("button"),k.textContent="Yes",N=g(),O=m("label"),O.textContent="No",S=g(),A=m("div"),M(L.$$.fragment),E=g(),j=m("div"),M(U.$$.fragment),q=g(),_=m("div"),_.innerHTML='\n    Made by\n    <a class="text-secondary" href="http://benslater.tech">Ben Slater</a>\n    using\n    <a class="text-secondary" href="https://svelte.dev/">Svelte,</a> \n    <a class="text-secondary" href="https://sailsjs.com/">Sails.js,</a>\n    and\n    <a class="text-secondary" href="https://www.getpapercss.com">Paper CSS</a>',$(n,"class","modal-state"),$(n,"id","reconnect-modal"),$(n,"type","checkbox"),$(a,"class","modal-bg"),$(a,"for","reconnect-modal"),$(c,"class","btn-close"),$(c,"for","reconnect-modal"),$(h,"class","modal-title"),$(R,"class","text-muted"),$(y,"class","modal-text"),$(k,"class","svelte-1vi3t37"),$(O,"class","paper-btn svelte-1vi3t37"),$(O,"for","reconnect-modal"),$(C,"class","rejoin-button-container svelte-1vi3t37"),$(u,"class","modal-body"),$(o,"class","modal"),$(A,"class","button-container svelte-1vi3t37"),$(j,"class","button-container svelte-1vi3t37"),$(_,"class","about svelte-1vi3t37"),$(e,"class","homepage svelte-1vi3t37")},m(d,m,p){l(d,e,m),i(e,n),i(e,r),i(e,o),i(o,a),i(o,s),i(o,u),i(u,c),i(u,f),i(u,h),i(u,b),i(u,y),i(y,w),i(y,R),i(y,x),i(u,P),i(u,C),i(C,k),i(C,N),i(C,O),i(e,S),i(e,A),Q(L,A,null),i(e,E),i(e,j),Q(U,j,null),i(e,q),i(e,_),T=!0,p&&I(),I=v(k,"click",t[1])},p(t,[e]){const n={};16&e&&(n.$$scope={dirty:e,ctx:t}),L.$set(n);const r={};16&e&&(r.$$scope={dirty:e,ctx:t}),U.$set(r)},i(t){T||(D(L.$$.fragment,t),D(U.$$.fragment,t),T=!0)},o(t){W(L.$$.fragment,t),W(U.$$.fragment,t),T=!1},d(t){t&&d(e),J(L),J(U),I()}}}function xe(t,e,n){let{currentRoute:r}=e,{params:o}=e;const a=pe.getJSON("gameInProgress");P(()=>{a&&document.getElementById("reconnect-modal").click()});return t.$set=t=>{"currentRoute"in t&&n(2,r=t.currentRoute),"params"in t&&n(3,o=t.params)},[a,()=>{a.role===he?$e.set(he):(be.set(a.player),$e.set(ge)),de("/game/"+a.game.gameId)},r,o]}let Pe;var Ce=async(t,e)=>{if(!Pe){const{_csrf:t}=await(await fetch("/api/get-csrf")).json();Pe=t}const n={...e,body:["POST","PUT","DELETE"].includes(e.method)?JSON.stringify({...e.body,_csrf:Pe}):void 0};return await fetch(t,n)};function ke(t,e,n){const r=t.slice();return r[15]=e[n],r[17]=n,r}function Ne(t,e,n){const r=t.slice();return r[12]=e[n],r[13]=e,r[14]=n,r}function Oe(t){let e,n,o,a,s,u,c,f,h,w,R,x,P,C,k,N,O,S,A,E,j,q,_,T,I,L=t[17]+1+"",U=t[2]?"Delete question":"✘",z=t[17]>0&&function(t){let e;return{c(){e=m("hr"),$(e,"class","svelte-1h3hu58")},m(t,n){l(t,e,n)},d(t){t&&d(e)}}}();function D(){t[9].call(x,t[12],t[17])}function W(){t[10].call(A,t[12],t[17])}return{c(){z&&z.c(),e=g(),n=m("div"),o=m("h4"),a=p("Q"),s=p(L),u=p(":"),c=g(),f=m("div"),h=m("label"),h.textContent="Question:",R=g(),x=m("input"),C=g(),k=m("div"),N=m("label"),N.textContent="Answer:",S=g(),A=m("input"),j=g(),q=m("div"),_=m("button"),T=p(U),$(o,"class","col sm-2 svelte-1h3hu58"),$(h,"for",w="question-input-"+(t[17]+1)),$(x,"class","input-block"),$(x,"type","text"),$(x,"id",P="question-input-"+(t[17]+1)),$(f,"class","form-group col sm-4"),$(N,"for",O="answer-input-"+(t[17]+1)),$(A,"class","input-block"),$(A,"type","text"),$(A,"id",E="answer-input-"+(t[17]+1)),$(k,"class","form-group col sm-4"),$(_,"class","background-danger delete-question-button svelte-1h3hu58"),$(q,"class","col sm-2 delete-question-button-container svelte-1h3hu58"),$(n,"class","row")},m(d,m,p){z&&z.m(d,m),l(d,e,m),l(d,n,m),i(n,o),i(o,a),i(o,s),i(o,u),i(n,c),i(n,f),i(f,h),i(f,R),i(f,x),y(x,t[12][t[17]].question),i(n,C),i(n,k),i(k,N),i(k,S),i(k,A),y(A,t[12][t[17]].answer),i(n,j),i(n,q),i(q,_),i(_,T),p&&r(I),I=[v(x,"input",D),v(A,"input",W)]},p(e,n){t=e,1&n&&x.value!==t[12][t[17]].question&&y(x,t[12][t[17]].question),1&n&&A.value!==t[12][t[17]].answer&&y(A,t[12][t[17]].answer),4&n&&U!==(U=t[2]?"Delete question":"✘")&&b(T,U)},d(t){z&&z.d(t),t&&d(e),t&&d(n),r(I)}}}function Se(t){let e,n,r,o,a,s,u,c,h,b,y,w,R=t[14]+1+"",x=t[12],P=[];for(let e=0;e<x.length;e+=1)P[e]=Oe(ke(t,x,e));function C(...e){return t[11](t[14],...e)}return{c(){e=m("div"),n=m("div"),r=m("h3"),o=p("Round "),a=p(R),s=g();for(let t=0;t<P.length;t+=1)P[t].c();u=g(),c=m("hr"),h=g(),b=m("div"),y=m("button"),y.textContent="Add question",$(r,"class",""),$(c,"class","add-question-separator svelte-1h3hu58"),$(y,"class","add-question background-primary svelte-1h3hu58"),$(b,"class","add-question-button-container svelte-1h3hu58"),$(n,"class","card-body"),$(e,"class","card svelte-1h3hu58")},m(t,d,f){l(t,e,d),i(e,n),i(n,r),i(r,o),i(r,a),i(n,s);for(let t=0;t<P.length;t+=1)P[t].m(n,null);i(n,u),i(n,c),i(n,h),i(n,b),i(b,y),f&&w(),w=v(y,"click",C)},p(e,r){if(t=e,5&r){let e;for(x=t[12],e=0;e<x.length;e+=1){const o=ke(t,x,e);P[e]?P[e].p(o,r):(P[e]=Oe(o),P[e].c(),P[e].m(n,u))}for(;e<P.length;e+=1)P[e].d(1);P.length=x.length}},d(t){t&&d(e),f(P,t),w()}}}function Ae(e){let n,o,a,s,u,c,p,h,b;E(e[8]);let y=e[0],w=[];for(let t=0;t<y.length;t+=1)w[t]=Se(Ne(e,y,t));return{c(){n=m("div"),o=m("h2"),o.textContent="Enter questions and answers",a=g();for(let t=0;t<w.length;t+=1)w[t].c();s=g(),u=m("div"),c=m("button"),c.textContent="Add round",p=g(),h=m("button"),h.textContent="Create game",$(c,"class","background-secondary svelte-1h3hu58"),$(h,"class","background-success svelte-1h3hu58"),$(u,"class","bottom-buttons svelte-1h3hu58")},m(t,d,f){l(t,n,d),i(n,o),i(n,a);for(let t=0;t<w.length;t+=1)w[t].m(n,null);i(n,s),i(n,u),i(u,c),i(u,p),i(u,h),f&&r(b),b=[v(window,"resize",e[8]),v(c,"click",e[4]),v(h,"click",e[5])]},p(t,[e]){if(13&e){let r;for(y=t[0],r=0;r<y.length;r+=1){const o=Ne(t,y,r);w[r]?w[r].p(o,e):(w[r]=Se(o),w[r].c(),w[r].m(n,s))}for(;r<w.length;r+=1)w[r].d(1);w.length=y.length}},i:t,o:t,d(t){t&&d(n),f(w,t),r(b)}}}function Ee(t,e,n){let{currentRoute:r}=e,{params:o}=e,a=[[{}]],s=0;const u=t=>{n(0,a[t]=[...a[t],{}],a)};let c;return t.$set=t=>{"currentRoute"in t&&n(6,r=t.currentRoute),"params"in t&&n(7,o=t.params)},t.$$.update=()=>{2&t.$$.dirty&&n(2,c=s<768)},[a,s,c,u,()=>{n(0,a=[...a,[{}]])},async()=>{const t=await Ce("/api/game/create",{method:"POST",body:{rounds:a}}),{gameId:e}=await t.json();$e.set(he),de("/game/"+e)},r,o,function(){n(1,s=window.innerWidth)},function(t,e){t[e].question=this.value,n(0,a)},function(t,e){t[e].answer=this.value,n(0,a)},t=>u(t)]}function je(e){let n,a,s,u,c,f,h,b,R,x,P,C,k,N,O,S,A,E;return{c(){n=m("div"),a=m("h2"),a.textContent="Enter game ID:",s=g(),u=m("div"),c=m("div"),f=m("label"),f.textContent="Game ID:",h=g(),b=m("input"),R=g(),x=m("div"),P=m("label"),P.textContent="Name:",C=g(),k=m("input"),N=g(),O=m("div"),S=m("button"),A=p("Join game"),$(a,"class","svelte-2t2rph"),$(f,"for","gameId"),$(b,"type","text"),$(b,"placeholder","Enter game ID..."),$(b,"id","gameId"),$(c,"class","form-group"),$(P,"for","name"),$(k,"type","text"),$(k,"placeholder","Enter name..."),$(k,"id","name"),$(x,"class","form-group"),$(u,"class","inputs svelte-2t2rph"),S.disabled=e[2],$(S,"class","svelte-2t2rph"),w(S,"background-success",!e[2]),$(O,"class","bottom-section svelte-2t2rph"),$(n,"class","join-page svelte-2t2rph")},m(t,d,m){l(t,n,d),i(n,a),i(n,s),i(n,u),i(u,c),i(c,f),i(c,h),i(c,b),y(b,e[0]),i(u,R),i(u,x),i(x,P),i(x,C),i(x,k),y(k,e[1]),i(n,N),i(n,O),i(O,S),i(S,A),m&&r(E),E=[v(b,"input",e[7]),v(b,"input",(function(){o(e[4](e[0]))&&e[4](e[0]).apply(this,arguments)})),v(k,"input",e[8]),v(S,"click",e[3])]},p(t,[n]){e=t,1&n&&b.value!==e[0]&&y(b,e[0]),2&n&&k.value!==e[1]&&y(k,e[1]),4&n&&(S.disabled=e[2]),4&n&&w(S,"background-success",!e[2])},i:t,o:t,d(t){t&&d(n),r(E)}}}function qe(t,e,n){let{currentRoute:r}=e,{params:o}=e,a="",s="";let u;return t.$set=t=>{"currentRoute"in t&&n(5,r=t.currentRoute),"params"in t&&n(6,o=t.params)},t.$$.update=()=>{3&t.$$.dirty&&n(2,u=!a.match(/\w-\w/)||""===s)},[a,s,u,async()=>{$e.set(ge);const t=await Ce("/api/player/create",{method:"POST",body:{name:s,gameId:a.toLowerCase()}}),{id:e}=await t.json();be.set({id:e,name:s}),de("/game/"+a)},t=>{n(0,a=t.toLowerCase())},r,o,function(){a=this.value,n(0,a)},function(){s=this.value,n(1,s)}]}function _e(t,e,n){const r=t.slice();return r[1]=e[n],r}function Te(t){let e,n,r,o,a=t[1].name+"";return{c(){e=m("ul"),n=m("li"),r=p(a),o=g()},m(t,a){l(t,e,a),i(e,n),i(n,r),i(e,o)},p(t,e){1&e&&a!==(a=t[1].name+"")&&b(r,a)},d(t){t&&d(e)}}}function Ie(e){let n,r,o,a=e[0],s=[];for(let t=0;t<a.length;t+=1)s[t]=Te(_e(e,a,t));return{c(){n=m("div"),r=m("h3"),r.textContent="Players:",o=g();for(let t=0;t<s.length;t+=1)s[t].c();$(r,"class","svelte-1gicyqp")},m(t,e){l(t,n,e),i(n,r),i(n,o);for(let t=0;t<s.length;t+=1)s[t].m(n,null)},p(t,[e]){if(1&e){let r;for(a=t[0],r=0;r<a.length;r+=1){const o=_e(t,a,r);s[r]?s[r].p(o,e):(s[r]=Te(o),s[r].c(),s[r].m(n,null))}for(;r<s.length;r+=1)s[r].d(1);s.length=a.length}},i:t,o:t,d(t){t&&d(n),f(s,t)}}}function Le(t,e,n){let{players:r=[]}=e;return t.$set=t=>{"players"in t&&n(0,r=t.players)},[r]}class Ue extends G{constructor(t){super(),F(this,t,Le,Ie,a,{players:0})}}function ze(t,e,n){const r=t.slice();return r[1]=e[n],r}function De(t){let e,n,r,o,a,s=t[1].name+"",u=t[1].answers.filter(Me).length+"";return{c(){e=m("p"),n=p(s),r=p(": "),o=p(u),a=g()},m(t,s){l(t,e,s),i(e,n),i(e,r),i(e,o),i(e,a)},p(t,e){1&e&&s!==(s=t[1].name+"")&&b(n,s),1&e&&u!==(u=t[1].answers.filter(Me).length+"")&&b(o,u)},d(t){t&&d(e)}}}function We(e){let n,r,o,a=e[0],s=[];for(let t=0;t<a.length;t+=1)s[t]=De(ze(e,a,t));return{c(){n=m("div"),r=m("div"),r.textContent="SCORES:",o=g();for(let t=0;t<s.length;t+=1)s[t].c()},m(t,e){l(t,n,e),i(n,r),i(n,o);for(let t=0;t<s.length;t+=1)s[t].m(n,null)},p(t,[e]){if(1&e){let r;for(a=t[0],r=0;r<a.length;r+=1){const o=ze(t,a,r);s[r]?s[r].p(o,e):(s[r]=De(o),s[r].c(),s[r].m(n,null))}for(;r<s.length;r+=1)s[r].d(1);s.length=a.length}},i:t,o:t,d(t){t&&d(n),f(s,t)}}}const Me=t=>"CORRECT"===t.result;function Qe(t,e,n){let{players:r=[]}=e;return t.$set=t=>{"players"in t&&n(0,r=t.players)},[r]}class Je extends G{constructor(t){super(),F(this,t,Qe,We,a,{players:0})}}function Be(t,e,n){const r=t.slice();return r[4]=e[n],r}function Fe(t){let e,n,o,a,s,u,c,f,h,y,R=t[4].answer+"";function x(...e){return t[2](t[4],...e)}function P(...e){return t[3](t[4],...e)}return{c(){e=m("div"),n=m("div"),o=p(R),a=g(),s=m("div"),u=m("button"),u.textContent="✔",c=g(),f=m("button"),f.textContent="✘",h=g(),$(n,"class","col col-6"),$(u,"class","svelte-xqdrpl"),w(u,"background-success","CORRECT"===t[4].result),$(f,"class","svelte-xqdrpl"),w(f,"background-danger","INCORRECT"===t[4].result),$(s,"class","col col-6 row svelte-xqdrpl"),$(e,"class","row svelte-xqdrpl")},m(t,d,m){l(t,e,d),i(e,n),i(n,o),i(e,a),i(e,s),i(s,u),i(s,c),i(s,f),i(e,h),m&&r(y),y=[v(u,"click",x),v(f,"click",P)]},p(e,n){t=e,1&n&&R!==(R=t[4].answer+"")&&b(o,R),1&n&&w(u,"background-success","CORRECT"===t[4].result),1&n&&w(f,"background-danger","INCORRECT"===t[4].result)},d(t){t&&d(e),r(y)}}}function Ge(e){let n,r=e[0],o=[];for(let t=0;t<r.length;t+=1)o[t]=Fe(Be(e,r,t));return{c(){n=m("div");for(let t=0;t<o.length;t+=1)o[t].c()},m(t,e){l(t,n,e);for(let t=0;t<o.length;t+=1)o[t].m(n,null)},p(t,[e]){if(3&e){let a;for(r=t[0],a=0;a<r.length;a+=1){const s=Be(t,r,a);o[a]?o[a].p(s,e):(o[a]=Fe(s),o[a].c(),o[a].m(n,null))}for(;a<o.length;a+=1)o[a].d(1);o.length=r.length}},i:t,o:t,d(t){t&&d(n),f(o,t)}}}function He(t,e,n){let{answers:r=[]}=e,{onMarkAnswer:o}=e;return t.$set=t=>{"answers"in t&&n(0,r=t.answers),"onMarkAnswer"in t&&n(1,o=t.onMarkAnswer)},[r,o,t=>o(t.id,"CORRECT"),t=>o(t.id,"INCORRECT")]}class Ke extends G{constructor(t){super(),F(this,t,He,Ge,a,{answers:0,onMarkAnswer:1})}}function Ve(e){let n,o,a,s,u,c,f,h,R,x,P,C,k,N,O,S,A=e[0]?"Submit":"Waiting for next question...";return{c(){n=m("div"),o=m("div"),a=m("div"),s=m("div"),u=m("label"),c=p("Answer:"),h=g(),R=m("input"),C=g(),k=m("button"),N=p(A),$(u,"for",f="answer-input-"+e[1]),$(R,"id",x="answer-input-"+e[1]),$(R,"class","input-block"),$(R,"type","text"),R.disabled=P=!e[0],$(s,"class","form-group"),$(k,"class","submit-button svelte-1fma4j5"),k.disabled=O=!e[0],w(k,"background-success",e[0]),$(a,"class","col col-fill"),$(o,"class","row svelte-1fma4j5"),$(n,"class","answer-input svelte-1fma4j5")},m(t,d,f){l(t,n,d),i(n,o),i(o,a),i(a,s),i(s,u),i(u,c),i(s,h),i(s,R),y(R,e[3]),i(a,C),i(a,k),i(k,N),f&&r(S),S=[v(R,"input",e[4]),v(k,"click",e[5])]},p(t,[e]){2&e&&f!==(f="answer-input-"+t[1])&&$(u,"for",f),2&e&&x!==(x="answer-input-"+t[1])&&$(R,"id",x),1&e&&P!==(P=!t[0])&&(R.disabled=P),8&e&&R.value!==t[3]&&y(R,t[3]),1&e&&A!==(A=t[0]?"Submit":"Waiting for next question...")&&b(N,A),1&e&&O!==(O=!t[0])&&(k.disabled=O),1&e&&w(k,"background-success",t[0])},i:t,o:t,d(t){t&&d(n),r(S)}}}function Ye(t,e,n){let r,{enabled:o}=e,{gameStateAnswer:a=0}=e,{onSubmit:s}=e;return t.$set=t=>{"enabled"in t&&n(0,o=t.enabled),"gameStateAnswer"in t&&n(1,a=t.gameStateAnswer),"onSubmit"in t&&n(2,s=t.onSubmit)},[o,a,s,r,function(){r=this.value,n(3,r)},()=>s(r)]}class Xe extends G{constructor(t){super(),F(this,t,Ye,Ve,a,{enabled:0,gameStateAnswer:1,onSubmit:2})}}function Ze(e){let n;return{c(){n=m("div"),n.innerHTML='<div class="svelte-3mluf4"></div> \n  <div class="svelte-3mluf4"></div> \n  <div class="svelte-3mluf4"></div> \n  <div class="svelte-3mluf4"></div>',$(n,"class","dots svelte-3mluf4")},m(t,e){l(t,n,e)},p:t,i:t,o:t,d(t){t&&d(n)}}}class tn extends G{constructor(t){super(),F(this,t,null,Ze,a,{})}}let en;var nn=async(t,e)=>{if(!en){const{_csrf:t}=await(await fetch("/api/get-csrf")).json();en=t}return await io.socket.post(t,{...e,_csrf:en})},rn=async t=>await io.socket.get(t),on=(t,e)=>io.socket.on(t,e);function an(t){let e,n,r,o;const a=new Ue({props:{players:t[6]}});let s=t[2]===ge&&un();return{c(){e=m("div"),M(a.$$.fragment),n=g(),s&&s.c(),r=h(),$(e,"class","player-list svelte-1b5fwep")},m(t,u){l(t,e,u),Q(a,e,null),l(t,n,u),s&&s.m(t,u),l(t,r,u),o=!0},p(t,e){const n={};64&e&&(n.players=t[6]),a.$set(n),t[2]===ge?s?4&e&&D(s,1):(s=un(),s.c(),D(s,1),s.m(r.parentNode,r)):s&&(U(),W(s,1,1,()=>{s=null}),z())},i(t){o||(D(a.$$.fragment,t),D(s),o=!0)},o(t){W(a.$$.fragment,t),W(s),o=!1},d(t){t&&d(e),J(a),t&&d(n),s&&s.d(t),t&&d(r)}}}function sn(t){let e,n,r,o;const a=[ln,cn],s=[];function u(t,e){return t[5]?t[4]&&t[4].state&&(t[4].state.endOfRound||t[4].state.gameOver)&&t[6]&&t[6].length?1:-1:0}return~(e=u(t))&&(n=s[e]=a[e](t)),{c(){n&&n.c(),r=h()},m(t,n){~e&&s[e].m(t,n),l(t,r,n),o=!0},p(t,o){let c=e;e=u(t),e===c?~e&&s[e].p(t,o):(n&&(U(),W(s[c],1,1,()=>{s[c]=null}),z()),~e?(n=s[e],n||(n=s[e]=a[e](t),n.c()),D(n,1),n.m(r.parentNode,r)):n=null)},i(t){o||(D(n),o=!0)},o(t){W(n),o=!1},d(t){~e&&s[e].d(t),t&&d(r)}}}function un(t){let e,n,r,o;const a=new tn({});return{c(){e=m("div"),n=m("div"),n.textContent="Waiting for host to start game",r=g(),M(a.$$.fragment),$(e,"class","bottom-section svelte-1b5fwep")},m(t,s){l(t,e,s),i(e,n),i(e,r),Q(a,e,null),o=!0},i(t){o||(D(a.$$.fragment,t),o=!0)},o(t){W(a.$$.fragment,t),o=!1},d(t){t&&d(e),J(a)}}}function cn(t){let e,n;const r=new Je({props:{players:t[6]}});return{c(){e=m("div"),M(r.$$.fragment),$(e,"class","player-scores svelte-1b5fwep")},m(t,o){l(t,e,o),Q(r,e,null),n=!0},p(t,e){const n={};64&e&&(n.players=t[6]),r.$set(n)},i(t){n||(D(r.$$.fragment,t),n=!0)},o(t){W(r.$$.fragment,t),n=!1},d(t){t&&d(e),J(r)}}}function ln(t){let e,n,r,o,a,s,u,c,f,v,y=t[7].question+"",w=t[2]===he&&dn(t);const R=[mn,fn],x=[];function P(t,e){return t[2]===ge?0:1}return u=P(t),c=x[u]=R[u](t),{c(){e=m("h4"),e.textContent="Question:",n=g(),r=m("div"),o=p(y),a=g(),w&&w.c(),s=g(),c.c(),f=h(),$(r,"class","question-answer-text svelte-1b5fwep")},m(t,c){l(t,e,c),l(t,n,c),l(t,r,c),i(r,o),l(t,a,c),w&&w.m(t,c),l(t,s,c),x[u].m(t,c),l(t,f,c),v=!0},p(t,e){(!v||128&e)&&y!==(y=t[7].question+"")&&b(o,y),t[2]===he?w?w.p(t,e):(w=dn(t),w.c(),w.m(s.parentNode,s)):w&&(w.d(1),w=null);let n=u;u=P(t),u===n?x[u].p(t,e):(U(),W(x[n],1,1,()=>{x[n]=null}),z(),c=x[u],c||(c=x[u]=R[u](t),c.c()),D(c,1),c.m(f.parentNode,f))},i(t){v||(D(c),v=!0)},o(t){W(c),v=!1},d(t){t&&d(e),t&&d(n),t&&d(r),t&&d(a),w&&w.d(t),t&&d(s),x[u].d(t),t&&d(f)}}}function dn(t){let e,n,r,o,a=t[7].answer+"";return{c(){e=m("h4"),e.textContent="Answer:",n=g(),r=m("div"),o=p(a),$(r,"class","question-answer-text svelte-1b5fwep")},m(t,a){l(t,e,a),l(t,n,a),l(t,r,a),i(r,o)},p(t,e){128&e&&a!==(a=t[7].answer+"")&&b(o,a)},d(t){t&&d(e),t&&d(n),t&&d(r)}}}function fn(t){let e,n;const r=new Ke({props:{answers:t[8],onMarkAnswer:t[12]}});return{c(){e=m("div"),M(r.$$.fragment),$(e,"class","player-answers svelte-1b5fwep")},m(t,o){l(t,e,o),Q(r,e,null),n=!0},p(t,e){const n={};256&e&&(n.answers=t[8]),r.$set(n)},i(t){n||(D(r.$$.fragment,t),n=!0)},o(t){W(r.$$.fragment,t),n=!1},d(t){t&&d(e),J(r)}}}function mn(t){let e,n;const r=new Xe({props:{enabled:!t[1],gameStateAnswer:t[4].state.answer,onSubmit:t[11]}});return{c(){e=m("div"),M(r.$$.fragment),$(e,"class","answer-input svelte-1b5fwep")},m(t,o){l(t,e,o),Q(r,e,null),n=!0},p(t,e){const n={};2&e&&(n.enabled=!t[1]),16&e&&(n.gameStateAnswer=t[4].state.answer),r.$set(n)},i(t){n||(D(r.$$.fragment,t),n=!0)},o(t){W(r.$$.fragment,t),n=!1},d(t){t&&d(e),J(r)}}}function pn(t){let e,n,r,o,a=t[4]&&t[4].state&&t[4].state.started?"Next Question":"Start Game";return{c(){e=m("div"),n=m("button"),r=p(a),$(n,"class","start-next-button svelte-1b5fwep"),n.disabled=t[9],w(n,"background-success",!t[9]),$(e,"class","bottom-section svelte-1b5fwep")},m(a,s,u){l(a,e,s),i(e,n),i(n,r),u&&o(),o=v(n,"click",t[10])},p(t,e){16&e&&a!==(a=t[4]&&t[4].state&&t[4].state.started?"Next Question":"Start Game")&&b(r,a),512&e&&(n.disabled=t[9]),512&e&&w(n,"background-success",!t[9])},d(t){t&&d(e),o()}}}function gn(t){let e,n,r,o,a,s,u,c,f;const h=[sn,an],v=[];function y(t,e){return t[3]?0:1}s=y(t),u=v[s]=h[s](t);let w=t[2]===he&&!(t[4]&&t[4].state&&t[4].state.gameOver)&&pn(t);return{c(){e=m("div"),n=m("h2"),r=p(t[0]),o=g(),a=m("div"),u.c(),c=g(),w&&w.c(),$(n,"class","title svelte-1b5fwep"),$(a,"class","main-section svelte-1b5fwep"),$(e,"class","game-page svelte-1b5fwep")},m(t,u){l(t,e,u),i(e,n),i(n,r),i(e,o),i(e,a),v[s].m(a,null),i(e,c),w&&w.m(e,null),f=!0},p(t,[n]){(!f||1&n)&&b(r,t[0]);let o=s;s=y(t),s===o?v[s].p(t,n):(U(),W(v[o],1,1,()=>{v[o]=null}),z(),u=v[s],u||(u=v[s]=h[s](t),u.c()),D(u,1),u.m(a,null)),t[2]!==he||t[4]&&t[4].state&&t[4].state.gameOver?w&&(w.d(1),w=null):w?w.p(t,n):(w=pn(t),w.c(),w.m(e,null))},i(t){f||(D(u),f=!0)},o(t){W(u),f=!1},d(t){t&&d(e),v[s].d(),w&&w.d()}}}function hn(t,e,n){let r,o,a;u(t,$e,t=>n(2,r=t)),u(t,ve,t=>n(4,o=t)),u(t,be,t=>n(21,a=t));let{currentRoute:s}=e,{params:c}=e,i=r===he?"Waiting for players to join...":"Waiting for game to start...",l=!1,d=0,f=0;const{namedParams:{id:m}}=s;P(async()=>{on("gameUpdate",t=>{ve.set(t.game),pe.getJSON("gameInProgress")||pe.set("gameInProgress",{player:a,game:{id:o.id,gameId:o.gameId},role:r},{expires:1}),o.state.started&&(console.log(o),n(0,i=`Round ${$+1}: Question ${b+1}`)),o.state.finished&&(n(0,i="Final scores:"),pe.remove("gameInProgress")),o.state.endOfRound&&n(0,i="End of round!"),o.state.gameOver&&n(0,i="Game over!"),d!==$&&(d=$,n(1,l=!1)),f!==o.state.question&&(f=o.state.question,n(1,l=!1))}),rn(`localhost:3000/api/game/${m}/join`)});let p,g,h,v,$,b,y,w,R,x;return t.$set=t=>{"currentRoute"in t&&n(13,s=t.currentRoute),"params"in t&&n(14,c=t.params)},t.$$.update=()=>{16&t.$$.dirty&&n(3,p=o&&o.state&&o.state.started),16&t.$$.dirty&&(g=o&&o.state&&o.state.gameOver),16&t.$$.dirty&&n(5,h=o&&o.state&&o.state.endOfRound),16&t.$$.dirty&&n(6,v=o&&o.players||[]),16&t.$$.dirty&&n(18,$=o&&o.state?o.state.round:void 0),16&t.$$.dirty&&n(19,b=o&&o.state?o.state.question:void 0),262160&t.$$.dirty&&n(20,y=o&&o.rounds&&o.rounds[$]||void 0),1572864&t.$$.dirty&&n(7,w=y&&y.questions[b]||void 0),128&t.$$.dirty&&n(8,R=w&&w.playerAnswers||[]),328&t.$$.dirty&&n(9,x=!v.length||p&&R.length<v.length)},[i,l,r,p,o,h,v,w,R,x,()=>nn(`localhost:3000/api/game/${m}/next`),t=>{n(1,l=!0),nn(`localhost:3000/api/game/${m}/answer`,{playerId:a.id,questionId:o.rounds[$].questions[b].id,answer:t})},(t,e)=>{nn(`localhost:3000/api/game/${m}/answer/${t}/mark`,{result:e})},s,c]}const vn=[{name:"/",component:class extends G{constructor(t){super(),F(this,t,xe,Re,a,{currentRoute:2,params:3})}}},{name:"/setup",component:class extends G{constructor(t){super(),F(this,t,Ee,Ae,a,{currentRoute:6,params:7})}}},{name:"/join",component:class extends G{constructor(t){super(),F(this,t,qe,je,a,{currentRoute:5,params:6})}}},{name:"/game/:id",component:class extends G{constructor(t){super(),F(this,t,hn,gn,a,{currentRoute:13,params:14})}}}];function $n(e){let n,r;const o=new fe({props:{routes:vn}});return{c(){n=m("main"),M(o.$$.fragment),$(n,"class","svelte-rns02x")},m(t,e){l(t,n,e),Q(o,n,null),r=!0},p:t,i(t){r||(D(o.$$.fragment,t),r=!0)},o(t){W(o.$$.fragment,t),r=!1},d(t){t&&d(n),J(o)}}}return new class extends G{constructor(t){super(),F(this,t,null,$n,a,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
